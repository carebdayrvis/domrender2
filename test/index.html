<html charset="UTF-8">
    <head>
        <link href="../node_modules/mocha/mocha.css" rel="stylesheet">
    </head>
    <body>
    
        <!-- Domrender Element -->
        <!-- <div style='display: none' id="main"> -->
        <div id="main">
            <span id="test_name">{this.name}</span>
            <span id="test_name_function">{this.upperCaseName()}</span>
            <span id="test_twostrings">{this.string1} - {this.string2}</span>
            <span id="test_escaped_html" @t=this.unescaped_html></span>
            <span id="test_unescaped_html" @h=this.unescaped_html></span>
            <span id="test_class" @class.test=this.class_test></span>
            <span id="test_class_interpolated" class="{this.classInterpolated}"></span>
            <span id="test_style" @style.background-color="this.backgroundColor"></span>
            <span id="test_style_interpolated" style="background-color: {this.backgroundColorInterpolated}; color: blue"></span>
            <span id="test_attribute" @attr.data-test=this.attrTest></span>
            <span id="test_attribute_interpolated" data-test={this.attrTestInterpolated}></span>
            <input id="test_hasattr_checked" type="checkbox" @hasAttr.checked=this.hasAttrChecked></input>
            <input id="test_hasattr_disabled" type="text" @hasAttr.disabled=this.hasAttrDisabled></input>
            <ul>
                <li class="test_repeat" @repeat="item in this.repeatItems">
                    <span>{item.value}</span>
                </li>
            </ul>
            <ul>
                <li @repeat="item in this.nestedRepeatItems">
                    <ul>
                        <li class="test_nested_repeat" @repeat="item2 in item.items">{item2.value}</li>
                    </ul>
                </li>
            </ul>
            <div id="use_template_parent">
                <div @use="use_template"></div>
            </div>
            <div id="use_template_parent_scope">
                <div @use="use_template_scope" @scope=this.useScope></div>
            </div>
            <div id="use_template_parent_extra">
                <div @use="use_template_extra" @extra="{property: 'extra'}"></div>
            </div>
            <div id="usevar_template_parent">
                <div @usevar="this.usevarTemplateName"></div>
            </div>
            <div id="usevar_template_parent_scope">
                <div @usevar="this.usevarScopeTemplateName" @scope=this.useScope></div>
            </div>
            <div id="usevar_template_parent_extra">
                <div @usevar="this.usevarExtraTemplateName" @extra="{property: 'extra'}"></div>
            </div>
        </div>


        <!-- Test Templates -->
        <div style="display: none" id="use_template">
            <h1 id="use_h1">Use!</h1>
        </div>
        <div style="display: none" id="use_template_scope">
            <h1 id="use_h1">{this.property}</h1>
        </div>
        <div style="display: none" id="use_template_extra">
            <h1 id="use_h1">{this[property]}</h1>
        </div>

        <my-counter2 style="display: none" id="my-counter2-template">
            <span class="a-counter" style='font-size: 50px;' @style.background-color="this.bgColor">{this.model.count}<span>
            <span @if="this.model.count == 20">!!!!!</span>
            <span @if="this.done">I'm done</span>
            <button @else @on.click="this.model.count += 1">Click!</button>

            <button @on.click="this.countdown()">Count down</button>
            <button @on.click="">ask for help</button>
        </my-counter2>

        <div id="custom-tags4">
            <my-counter2 @model="this.counter" @args="{bgColor: 'green'}"></my-counter2>
            <button @on.click="this.counter.count = 0">Reset counter</button>
        </div>

        <!-- Mocha Reporting Element -->
        <div id="mocha"></div>
        <script>
            function MyCounter(model, state) {
                this.model = model
                this.bgColor = state.bgColor 
            }

            function MyCounter2(model, args) { // constructor acts as mount function
                this.model = model
                if (args) {
                    this.bgColor = args.bgColor 
                }
            }

            MyCounter2.prototype.countdown = function() { // blindly everytime we render?
                if (this.countingDown) {
                    return 
                }

                this.countingDown = true
                setInterval(() => {
                    this.model.count -= 1 
                    this.render()
                }, 500)
            }

            MyCounter2.prototype.onUpdate = function() { // blindly everytime we render?
                if (this.model.count == 20) {
                    this.done = true 
                }

                if (this.model.count == 0) {
                    this.done = true 
                }
            }

            MyCounter2.prototype.onUnmount = function() {
                
            }
        </script>

        <script src="../node_modules/jquery/dist/jquery.min.js"></script>
        <script src="../node_modules/mocha/mocha.js"></script>
        <script src="../node_modules/chai/chai.js"></script>
        <script src="../domrender3.js"></script>
        <script src="helpers.js"></script>
        <script src="index.js"></script>
    </body>
</html>
